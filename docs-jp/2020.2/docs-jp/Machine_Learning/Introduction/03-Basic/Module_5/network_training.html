


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis チュートリアル
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">English version</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">入門</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Getting_Started/Vitis/README.html">Vitis フロー 101 チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Getting_Started/Vitis_HLS/README.html">Vitis HLS の解析および最適化</a></li>
</ul>
<p class="caption"><span class="caption-text">機械学習 (英語版)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">Introduction to Machine Learning with Vitis AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html#design-tutorials">Design Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html#feature-tutorials">Feature Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">アクセラレーション</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Hardware_Accelerators/README.html">Vitis ハードウェア アクセラレータの概要</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Hardware_Accelerators/README.html#id1">設計チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Hardware_Accelerators/README.html#id2">機能チュートリアル</a></li>
</ul>
<p class="caption"><span class="caption-text">AI エンジン開発 (英語版)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../AI_Engine_Development/README.html">Design Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../AI_Engine_Development/README.html#feature-tutorials">Feature Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">プラットフォーム作成チュートリアル</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Vitis_Platform_Creation/README.html">プラットフォームの作成</a></li>
</ul>
<p class="caption"><span class="caption-text">XRT および Vitis システム最適化</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Runtime_and_System_Optimization/README.html">設計チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Runtime_and_System_Optimization/README.html#id2">機能チュートリアル</a></li>
</ul>
<p class="caption"><span class="caption-text">バージョン</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/Vitis-Tutorials-2019.2-Hotfix1/README.md">2019.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/Machine_Learning/Introduction/03-Basic/Module_5/network_training.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis チュートリアル</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Journey from Original RefineDet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/Machine_Learning/Introduction/03-Basic/Module_5/network_training.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="journey-from-original-refinedet">
<h1>Journey from Original RefineDet<a class="headerlink" href="#journey-from-original-refinedet" title="Permalink to this headline">¶</a></h1>
<p>This module will explain how to start from the original RefineDet <a class="reference external" href="https://github.com/sfzhang15/RefineDet">repo</a> and get the model provided in the model zoo.</p>
<div class="section" id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Internet connection avaliable</p></li>
<li><p>Vitis AI docker succesfully starts</p></li>
<li><p>Conda environment ‘vitis-ai-caffe’ is enabled by <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">vitis-ai-caffe</span></code></p></li>
</ul>
</div>
<div class="section" id="refinedet">
<h2>RefineDet<a class="headerlink" href="#refinedet" title="Permalink to this headline">¶</a></h2>
<p>RefineDet is an one-stage objection detection network that could achieve better accuracy than two-stage networks before it’s publication but still maintains comparable speed performance of one-stage networks.</p>
<p>RefineDet can be seen as an improved version of SSD with addition of anchor refinement module (ARM), object detection module (ODM) and transfer connection block (TCB) to improve accuracy.</p>
<p>The detailed introduction about network itself is beyond the scope of this module, please refer to the original paper.</p>
</div>
<div class="section" id="adopt-refinedet-to-vitis-ai">
<h2>Adopt RefineDet to Vitis AI<a class="headerlink" href="#adopt-refinedet-to-vitis-ai" title="Permalink to this headline">¶</a></h2>
<p>In order to train and deploy the network with Vitis AI toolchain and DPU, original RefineDet needs few modifications to make it compatitble. The RefineDet repository provides scripts based on its own Caffe version and also provide pretrained network with different resolution on VOC or COCO dataset.</p>
<p>Here we will base on Xilinx Caffe, the Xilinx version with support of common networks and our own networks, to show the steps to adopt original network onto Vitis AI. The model we used in last module from Vitis AI model zoo is originated from 320*320 resolution COCO model.</p>
<p>We will brake the work into following two part:</p>
<ul class="simple">
<li><p>Fundemental modification to the original network</p></li>
<li><p>Customized modification to covert 320x320 model into 480x360 model</p></li>
</ul>
<p>We will use COCO 320x320 model as the example in the rest of the module, please download it from links provided RefineDet author</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>https://drive.google.com/open?id=1BIVvkSQM8DarpeqOpjgPpDxUoFq9ZxKM

http://pan.baidu.com/s/1gf8J7Yr
</pre></div>
</div>
<p>Extract the file package and files will be like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="n">VGGNet</span>
<span class="o">|</span>   <span class="o">---</span> <span class="n">coco</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">refinedet_vgg16_320x320</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">coco_refinedet_vgg16_320x320_final</span><span class="o">.</span><span class="n">caffemodel</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">deploy</span><span class="o">.</span><span class="n">prototxt</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">multi_test_deploy</span><span class="o">.</span><span class="n">prototxt</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">single_test_deploy</span><span class="o">.</span><span class="n">prototxt</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">solver</span><span class="o">.</span><span class="n">prototxt</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">test</span><span class="o">.</span><span class="n">prototxt</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">train</span><span class="o">.</span><span class="n">prototxt</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">---</span> <span class="n">VGG16_COCO_320</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<div class="section" id="fundemental-modification">
<h3>Fundemental Modification<a class="headerlink" href="#fundemental-modification" title="Permalink to this headline">¶</a></h3>
<p>In order to make any RefineDet models work with Vitis AI, following basic modifications are needed</p>
<p><strong>Item 1. Change ‘Normalize’ layer into ‘BatchNorm’ layer</strong></p>
<p>In the original network, Normalize layers are used after conv4_3 and conv5_3 which are not supported by DPU. The solution is to use BatchNorm layer as the alternative.</p>
<p>Please note that the BatchNorm layer will be right after the conv layer (conv4_3 or conv5_3) and before ReLu layer (in place), thus the top and bottom field should all be the name of conv layer (conv4_3 or conv5_3).</p>
<p>Change from <code class="docutils literal notranslate"><span class="pre">conv4_3_norm</span></code> to <code class="docutils literal notranslate"><span class="pre">conv4_3_bn</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span> <span class="p">{</span>
  <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;conv4_3_norm&quot;</span>
  <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;Normalize&quot;</span>
  <span class="n">bottom</span><span class="p">:</span> <span class="s2">&quot;conv4_3&quot;</span>
  <span class="n">top</span><span class="p">:</span> <span class="s2">&quot;conv4_3_norm&quot;</span>
  <span class="n">norm_param</span> <span class="p">{</span>
    <span class="n">across_spatial</span><span class="p">:</span> <span class="n">false</span>
    <span class="n">scale_filler</span> <span class="p">{</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span>
      <span class="n">value</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
    <span class="n">channel_shared</span><span class="p">:</span> <span class="n">false</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span> <span class="p">{</span>
  <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;conv4_3_bn&quot;</span>
  <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;BatchNorm&quot;</span>
  <span class="n">bottom</span><span class="p">:</span> <span class="s2">&quot;conv4_3&quot;</span>
  <span class="n">top</span><span class="p">:</span> <span class="s2">&quot;conv4_3&quot;</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">0</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="n">phase</span><span class="p">:</span> <span class="n">TRAIN</span>
  <span class="n">batch_norm_param</span> <span class="p">{</span>
    <span class="n">scale_filler</span> <span class="p">{</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span>
      <span class="n">value</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="n">bias_filler</span> <span class="p">{</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span>
      <span class="n">value</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Change from <code class="docutils literal notranslate"><span class="pre">conv5_3_norm</span></code> to <code class="docutils literal notranslate"><span class="pre">conv5_3_bn</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span> <span class="p">{</span>
  <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;conv5_3_norm&quot;</span>
  <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;Normalize&quot;</span>
  <span class="n">bottom</span><span class="p">:</span> <span class="s2">&quot;conv5_3&quot;</span>
  <span class="n">top</span><span class="p">:</span> <span class="s2">&quot;conv5_3_norm&quot;</span>
  <span class="n">norm_param</span> <span class="p">{</span>
    <span class="n">across_spatial</span><span class="p">:</span> <span class="n">false</span>
    <span class="n">scale_filler</span> <span class="p">{</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span>
      <span class="n">value</span><span class="p">:</span> <span class="mi">8</span>
    <span class="p">}</span>
    <span class="n">channel_shared</span><span class="p">:</span> <span class="n">false</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layer</span> <span class="p">{</span>
  <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;conv5_3_bn&quot;</span>
  <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;BatchNorm&quot;</span>
  <span class="n">bottom</span><span class="p">:</span> <span class="s2">&quot;conv5_3&quot;</span>
  <span class="n">top</span><span class="p">:</span> <span class="s2">&quot;conv5_3&quot;</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="n">param</span> <span class="p">{</span>
    <span class="n">lr_mult</span><span class="p">:</span> <span class="mi">0</span>
    <span class="n">decay_mult</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
  <span class="n">phase</span><span class="p">:</span> <span class="n">TRAIN</span>
  <span class="n">batch_norm_param</span> <span class="p">{</span>
    <span class="n">scale_filler</span> <span class="p">{</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span>
      <span class="n">value</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="n">bias_filler</span> <span class="p">{</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span>
      <span class="n">value</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Item 2. Merge ‘train.prototxt’ and ‘test.prototxt’ into ‘trainval.prototxt’ for simpilicity (Optional)</strong></p>
<p>In order to montior both loss and mAP during the training process, we could add last four layers from the test.prototxt into the end of the train.protoxt. At the same time, add AnnotatedData layer for TEST phase to get input data for testing.</p>
<p>Add <code class="docutils literal notranslate"><span class="pre">multi_gpu_testing:</span> <span class="pre">false</span></code> into AnnotatedData layer for TEST phase.</p>
<p>An exmaple prototxt after merge is included here, i.e, <code class="docutils literal notranslate"><span class="pre">refinedet_baseline.prototxt</span></code>.</p>
<p><strong>Item 3. Change the layer types of ‘arm_loss’, ‘odm_loss’, ‘detection_out’ and ‘detection_eval’ to be the type name in Xilinx Caffe</strong></p>
<p>In Xilinx Caffe, in order to avoid potential confilct, the layer types using by RefineDet are renamed, which is shown in below table:</p>
<p>| Layer          |  Original Layer Type | Layer Type in Xilinx Caffe  |
| —-           | —-              | —-                    |
| arm_loss       | MultiBoxLoss      | MultiBoxLossRefine      |
| odm_loss       | MultiBoxLoss      | MultiBoxLossRefine      |
| detection_out  | DetectionOutput   | DetectionOutputRefine   |
| detection_eval | DetectionEvaluate | DetectionEvaluateRefine |</p>
<p><strong>Item 4. Modify path to the necessary files</strong></p>
<p>In the AnnotatedData layer for trainning, please change</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">holding</span> <span class="n">the</span> <span class="n">train</span> <span class="n">LMDB</span> <span class="n">file</span>

    <span class="n">data_param</span> <span class="p">{</span>
    <span class="n">source</span><span class="p">:</span> <span class="s2">&quot;../cf_refinedet_coco_480_360_0.96_5.08G/data/coco2014_lmdb/train2014_lmdb/&quot;</span>
    <span class="n">batch_size</span><span class="p">:</span> <span class="mi">20</span>
    <span class="n">backend</span><span class="p">:</span> <span class="n">LMDB</span>
    <span class="p">}</span>

<span class="o">-</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">labelmap</span> <span class="n">file</span>

    <span class="n">label_map_file</span><span class="p">:</span> <span class="s2">&quot;../cf_refinedet_coco_480_360_0.96_5.08G/labelmap.prototxt&quot;</span>
</pre></div>
</div>
<p>In the AnnotatedData layer for testing, please change</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">holding</span> <span class="n">the</span> <span class="n">train</span> <span class="n">LMDB</span> <span class="n">file</span>

    <span class="n">data_param</span> <span class="p">{</span>
    <span class="n">source</span><span class="p">:</span> <span class="s2">&quot;../cf_refinedet_coco_480_360_0.96_5.08G/data/coco2014_lmdb/val2014_lmdb/&quot;</span>
    <span class="n">batch_size</span><span class="p">:</span> <span class="mi">10</span>
    <span class="n">backend</span><span class="p">:</span> <span class="n">LMDB</span>
    <span class="n">multi_gpu_testing</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">}</span>


<span class="o">-</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">labelmap</span> <span class="n">file</span>

    <span class="n">label_map_file</span><span class="p">:</span> <span class="s2">&quot;../cf_refinedet_coco_480_360_0.96_5.08G/labelmap.prototxt&quot;</span>
</pre></div>
</div>
<p>In the detection_eval layer, please change</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">name_size</span> <span class="n">file</span> 

    <span class="n">name_size_file</span><span class="p">:</span> <span class="s2">&quot;../cf_refinedet_coco_480_360_0.96_5.08G/data/test_name_size.txt&quot;</span>
</pre></div>
</div>
<p><strong>Item 5. Modify solver.prototxt to change hyperparameters</strong></p>
<p>Configure the hyperparameters according to your own environment (like GPU memory size) and your own training strategy. Some parameters used are listed here as example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">base_lr</span><span class="p">:</span> <span class="mf">0.01</span>
<span class="n">max_iter</span><span class="p">:</span> <span class="mi">200000</span>
<span class="n">lr_policy</span><span class="p">:</span> <span class="s2">&quot;multistep&quot;</span>
<span class="n">stepvalue</span><span class="p">:</span> <span class="mi">80000</span>
<span class="n">stepvalue</span><span class="p">:</span> <span class="mi">160000</span>
<span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;SGD&quot;</span>
<span class="n">gamma</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="n">momentum</span><span class="p">:</span> <span class="mf">0.9</span>
<span class="n">weight_decay</span><span class="p">:</span> <span class="mf">0.0005</span>
<span class="n">snapshot</span><span class="p">:</span> <span class="mi">5000</span>
<span class="n">solver_mode</span><span class="p">:</span> <span class="n">GPU</span>
<span class="n">test_initialization</span><span class="p">:</span> <span class="kc">True</span>
<span class="n">eval_type</span><span class="p">:</span> <span class="s2">&quot;detection&quot;</span>
<span class="n">ap_version</span><span class="p">:</span> <span class="s2">&quot;11point&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="customized-modification">
<h3>Customized Modification<a class="headerlink" href="#customized-modification" title="Permalink to this headline">¶</a></h3>
<p>To customize the 320x320 COCO model into the 480x360 model provided in Vitis AI model zoo, apart from the fundemental changes mentioned above, extra modifications are needed.</p>
<p>RefineDet uses TCB, the FPN like structure from layer <code class="docutils literal notranslate"><span class="pre">conv4_3</span></code>, <code class="docutils literal notranslate"><span class="pre">conv5_3</span></code>, <code class="docutils literal notranslate"><span class="pre">fc7</span></code> to <code class="docutils literal notranslate"><span class="pre">conv</span> <span class="pre">6_2</span></code> which constructed by three 2x downsampling and corrsponding three 2x upsampling in between. This structure has the strict requriement that the kernel size (k_w and k_h) of layer <code class="docutils literal notranslate"><span class="pre">conv4_3</span></code> must be the multiple of 8 (2^3). Also, before <code class="docutils literal notranslate"><span class="pre">conv4_3</span></code> there is also three 2x downsampling during feature extraction. If directly change resolution 320x320 to 480x360 on original network, the k_w and k_h of layer <code class="docutils literal notranslate"><span class="pre">conv4_3</span></code> will be 60 and 45, which will result in error for following TCB structure.</p>
<p>In order to have a 480x360 resolution network, special modificaitons have been made to make k_w and k_h of <code class="docutils literal notranslate"><span class="pre">conv4_3</span></code> to be 64 and 48, which are explained in detailed in item 2 below.</p>
<p><strong>Item 1. Change input size from 320x320 to 480x360</strong></p>
<p>In the AnnotatedData layers, change width and height value in resize_param to be 480 and 360</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">resize_param</span> <span class="p">{</span>
      <span class="n">prob</span><span class="p">:</span> <span class="mi">1</span>
      <span class="n">resize_mode</span><span class="p">:</span> <span class="n">WARP</span>
      <span class="n">height</span><span class="p">:</span> <span class="mi">360</span>
      <span class="n">width</span><span class="p">:</span> <span class="mi">480</span>
      <span class="n">interp_mode</span><span class="p">:</span> <span class="n">LINEAR</span>
      <span class="n">interp_mode</span><span class="p">:</span> <span class="n">AREA</span>
      <span class="n">interp_mode</span><span class="p">:</span> <span class="n">NEAREST</span>
      <span class="n">interp_mode</span><span class="p">:</span> <span class="n">CUBIC</span>
      <span class="n">interp_mode</span><span class="p">:</span> <span class="n">LANCZOS4</span>
    <span class="p">}</span>
</pre></div>
</div>
<p><strong>Item 2. Change convlution layers, pooling layer parameters to support new resolution</strong></p>
<p>If we use original network parameters and structure in 480x360 resolution, the feature map size after conv4_3 will be 60x45, which cannot satisfy the requirement of following TCB structure and result in error.</p>
<p>In order to arrive at the feature map size of 64x48 after conv4_3, we provide a version of implementation. Please note that this is just one way to achieve the requirment, and that the feature map size or network structure/parameter can be modified in many different ways.</p>
<p>| Layer                      | Parameter   | Original     | Modified | Feature Map Size |
| :—-:                     | :—-:      | :—-:       | :—-:   | :—-:           |
| conv1_1                    | pad         | 1            | 2        | 482x362          |
| conv1_2                    | pad         | 1            | 2        | 484x364          |
| conv2_2                    | pad         | 1            | 2        | 244x184          |
| conv3_1                    | pad         | 1            | 2        | 124x94           |
| conv3_2                    | pad         | 1            | 2        | 126x96           |
| conv3_3                    | kernel_size | 3            | 2        | 64x48            |
|                            | stride      | 1            | 2        |                  |
|                            | pad_w       | 1            | 1        |                  |
|                            | pad_h       | 1            | 0        |                  |
| pool3                      |             |              | delete   |                  |
| conv4_1                    | bottom      | pool3        | conv3_3  | 64x48            |
| conv4_3_bn                 |             | -            | add      |                  |
| pool4                      |             |              | delete   |                  |
| conv5_1                    | kernel_size | 3            | 2        | 32x24            |
|                            | stride      | 1            | 2        |                  |
|                            | pad         | 1            | 0        |                  |
|                            | bottom      | pool4        | conv4_3  |                  |
| conv5_3_bn                 |             | -            | add      |                  |
| pool5                      |             |              | delete   |                  |
| fc6                        | kernel_size | 3            | 2        | 16x12            |
|                            | stride      | 1            | 2        |                  |
|                            | pad         | 3            | 0        |                  |
|                            | bottom      | pool5        | conv5_3  |                  |
| conv5_3_norm               |             |              | delete   |                  |
| TL4_1                      | bottom      | conv5_3_norm | conv5_3  |                  |
| conv4_3_norm               |             |              | delete   |                  |
| TL3_1                      | bottom      | conv4_3_norm | conv4_3  |                  |
| conv4_3_norm_mbox_loc      | bottom      | conv4_3_norm | conv4_3  |                  |
| conv4_3_norm_mbox_conf     | bottom      | conv4_3_norm | conv4_3  |                  |
| conv4_3_norm_mbox_priorbox | bottom      | conv4_3_norm | conv4_3  |                  |
| conv5_3_norm_mbox_loc      | bottom      | conv5_3_norm | conv5_3  |                  |
| conv5_3_norm_mbox_conf     | bottom      | conv5_3_norm | conv5_3  |                  |
| conv5_3_norm_mbox_priorbox | bottom      | conv5_3_norm | conv5_3  |                  |</p>
<p>All the above-mentioned modification can be found in the exmaple prototxt <code class="docutils literal notranslate"><span class="pre">refinedet_baseline.prototxt</span></code>.</p>
<p><strong>Item 3. Change class number from 81 to 2</strong></p>
<p>There five layers that relate to class number, four convlution layers and one loss layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">In</span> <span class="n">convolution_param</span> <span class="n">of</span> <span class="n">following</span> <span class="n">layers</span><span class="p">,</span> <span class="n">change</span> <span class="n">num_output</span> <span class="kn">from</span> <span class="mi">243</span> <span class="n">to</span> <span class="mf">6.</span> 
  <span class="n">P3_mbox_conf</span>
  <span class="n">P4_mbox_conf</span>
  <span class="n">P5_mbox_conf</span>
  <span class="n">P6_mbox_conf</span>
    
<span class="o">-</span> <span class="n">In</span> <span class="n">odm_loss</span> <span class="n">layer</span><span class="p">,</span> <span class="n">change</span> <span class="n">num_classes</span> <span class="kn">from</span> <span class="mi">81</span> <span class="n">to</span> <span class="mi">2</span> 
</pre></div>
</div>
</div>
</div>
<div class="section" id="train-the-modified-network">
<h2>Train the Modified Network<a class="headerlink" href="#train-the-modified-network" title="Permalink to this headline">¶</a></h2>
<p>Use standard <code class="docutils literal notranslate"><span class="pre">VGG_ILSVRC_16_layers_fc_reduced.caffemodel</span></code> as the initial weights and train the modified version from scratch. Get it by running command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">vision</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">unc</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">wliu</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">ParseNet</span><span class="o">/</span><span class="n">VGG_ILSVRC_16_layers_fc_reduced</span><span class="o">.</span><span class="n">caffemodel</span>
</pre></div>
</div>
<p>Train the network with following command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">caffe</span> <span class="n">train</span> <span class="o">-</span><span class="n">solver</span> <span class="n">solver</span><span class="o">.</span><span class="n">prototxt</span> <span class="o">-</span><span class="n">weights</span> <span class="n">VGG_ILSVRC_16_layers_fc_reduced</span><span class="o">.</span><span class="n">caffemodel</span> <span class="o">-</span><span class="n">gpu</span> <span class="mi">0</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span> <span class="o">|</span> <span class="n">tee</span> <span class="n">train</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>Detection mAP during one experimental training process could be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">I0601</span> <span class="mi">08</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">36.417382</span> <span class="mi">17132</span> <span class="n">net</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">280</span><span class="p">]</span> <span class="n">This</span> <span class="n">network</span> <span class="n">produces</span> <span class="n">output</span> <span class="n">detection_eval</span>
<span class="n">I0601</span> <span class="mi">08</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mf">59.333092</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.152085</span>
<span class="n">I0601</span> <span class="mi">10</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mf">55.472414</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.171831</span>
<span class="n">I0601</span> <span class="mi">11</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">21.744807</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.276751</span>
<span class="n">I0601</span> <span class="mi">13</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">53.489629</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.263878</span>
<span class="n">I0601</span> <span class="mi">15</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mf">20.257485</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.289203</span>
<span class="n">I0601</span> <span class="mi">16</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">48.145087</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.305306</span>
<span class="n">I0601</span> <span class="mi">18</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mf">49.653108</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.350838</span>
<span class="n">I0601</span> <span class="mi">19</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mf">23.386104</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.337912</span>
<span class="n">I0601</span> <span class="mi">21</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mf">57.058233</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.322393</span>
<span class="n">I0601</span> <span class="mi">23</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mf">30.205420</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.356988</span>
<span class="n">I0602</span> <span class="mi">00</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">07.622771</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.324532</span>
<span class="n">I0602</span> <span class="mi">02</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mf">28.071298</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.359916</span>
<span class="n">I0602</span> <span class="mi">03</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">34.299418</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.427493</span>
<span class="n">I0602</span> <span class="mi">05</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mf">08.372817</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.419444</span>
<span class="n">I0602</span> <span class="mi">07</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mf">43.965183</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.382097</span>
<span class="n">I0602</span> <span class="mi">08</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mf">05.628803</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.552272</span>
<span class="n">I0602</span> <span class="mi">10</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mf">16.057716</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.557035</span>
<span class="n">I0602</span> <span class="mi">11</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mf">01.469343</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.566706</span>
<span class="n">I0602</span> <span class="mi">13</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span><span class="mf">44.348400</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.545264</span>
<span class="n">I0602</span> <span class="mi">15</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">17.255231</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.652842</span>
<span class="n">I0602</span> <span class="mi">16</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">42.457309</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.658513</span>
<span class="n">I0602</span> <span class="mi">18</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mf">52.569782</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.687939</span>
<span class="n">I0602</span> <span class="mi">21</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">55.022497</span> <span class="mi">17132</span> <span class="n">solver</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">901</span><span class="p">]</span>     <span class="n">Test</span> <span class="n">net</span> <span class="n">output</span> <span class="c1">#0: detection_eval = 0.692454</span>
</pre></div>
</div>
<p>The model zoo has provided well trained baseline model as well as other three optimized models in different pruning ratio, which are corrsponding to model 10 to 13 in <a class="reference external" href="https://github.com/Xilinx/Vitis-AI/tree/master/models/AI-Model-Zoo#model-details">model download page</a>. All models could be used to test mAP and deploy onboard by Vitis AI toolchain.</p>
<p>Continue toolchain content at the <a class="reference external" href="/Machine_Learning/Introduction/03-Basic/Module_5/README.md/#evaluate-model">main page</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020–2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>