


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis チュートリアル
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">English version</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">入門</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis/README.html">Vitis フロー 101 チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis_HLS/README.html">Vitis HLS の解析および最適化</a></li>
</ul>
<p class="caption"><span class="caption-text">機械学習 (英語版)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Machine_Learning/README.html">Introduction to Machine Learning with Vitis AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Machine_Learning/README.html#design-tutorials">Design Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Machine_Learning/README.html#feature-tutorials">Feature Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">アクセラレーション</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Accelerators/README.html">Vitis ハードウェア アクセラレータの概要</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Accelerators/README.html#id1">設計チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Accelerators/README.html#id2">機能チュートリアル</a></li>
</ul>
<p class="caption"><span class="caption-text">AI エンジン開発 (英語版)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Design Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../README.html#feature-tutorials">Feature Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">プラットフォーム作成チュートリアル</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/README.html">プラットフォームの作成</a></li>
</ul>
<p class="caption"><span class="caption-text">XRT および Vitis システム最適化</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/README.html">設計チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/README.html#id2">機能チュートリアル</a></li>
</ul>
<p class="caption"><span class="caption-text">バージョン</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/Vitis-Tutorials-2019.2-Hotfix1/README.md">2019.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/AI_Engine_Development/Feature_Tutorials/05-AI-engine-versal-integration/README.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Vitis チュートリアル</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/AI_Engine_Development/Feature_Tutorials/05-AI-engine-versal-integration/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table>
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>AI Engine Versal Integration for Hardware Emulation and Hardware</h1>
   </td>
 </tr>
 <tr>
 </td>
 </tr>
</table><div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The Xilinx Versal ACAP is a fully software-programmable, heterogeneous compute platform that combines the PS (Scalar Engine which includes the Arm processors), PL (Adaptable Engines which includes the FPGA fabric) and AI Engines (AI Engines; Intelligent Engines).</p>
<p>This tutorial demonstrates creating a system design running on the AI Engine, PS, and PL and validating the design running on these heterogeneous domains by running Hardware Emulation.</p>
<p>This tutorial steps through hardware emulation and hardware flow in the context of a complete Versal ACAP system integration. A Makefile is provided, which can be modified to suit your own needs in a different context. By default the Makefile is set for <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>. If you need to build for <code class="docutils literal notranslate"><span class="pre">hw</span></code>, add <code class="docutils literal notranslate"><span class="pre">TARGET=hw</span></code> to the <code class="docutils literal notranslate"><span class="pre">make</span></code> commands.</p>
<p><strong>IMPORTANT</strong>: Before beginning the tutorial make sure you have read and followed the <em>Vitis Software Platform Release Notes</em> (v2020.2) for setting up software and installing the platform. Also, the variable <code class="docutils literal notranslate"><span class="pre">PLATFORM_REPO_PATHS</span></code> is used to find the platform installation path. Set this variable appropriately. Make sure to run the <code class="docutils literal notranslate"><span class="pre">environment-setup-aarch64-xilinx-linux</span></code> script as to setup the <code class="docutils literal notranslate"><span class="pre">SDKTARGETSYSROOT</span></code> environment variable used to define the <code class="docutils literal notranslate"><span class="pre">SYSROOT</span></code> location.</p>
<p>This tutorial targets the VCK190 ES board (see https://www.xilinx.com/products/boards-and-kits/vck190.html). This board is currently available via early access. If you have already purchased this board, download the necessary files from the lounge and ensure you have the correct licenses installed. If you do not have a board and ES license please contact your Xilinx sales contact.</p>
</div>
<div class="section" id="objectives">
<h1>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h1>
<p>After completing this tutorial, you should be able to:</p>
<ul class="simple">
<li><p>Add input/output ports in an ADF dataflow graph and define their names which will be visible during system integration</p></li>
<li><p>Compile HLS functions for integration in the Programmable Logic (PL)</p></li>
<li><p>Compile ADF graphs</p></li>
<li><p>Create a configuration file that describes system connections and use it during the link stage</p></li>
<li><p>Create a software application that runs on Linux</p></li>
<li><p>Package the design into an easy-to-boot SD card image</p></li>
</ul>
</div>
<div class="section" id="tutorial-overview">
<h1>Tutorial Overview<a class="headerlink" href="#tutorial-overview" title="Permalink to this headline">¶</a></h1>
<p><strong>Section 1</strong>: Compile AI Engine code using the AI Engine compiler and HLS code using <code class="docutils literal notranslate"><span class="pre">v++</span></code>.</p>
<p><strong>Section 2</strong>: Link the AI Engine kernels, and HLS PL kernels with an extensible platform provided.</p>
<p><strong>Section 3</strong>: Compile the A72 host code.</p>
<p><strong>Section 4</strong>: Create the bootable image.</p>
<p><strong>Section 5</strong>: Run the hardware emulation.</p>
<p>The design that will be used is shown in the following figure:</p>
<p><img alt="System Diagram" src="../../../_images/lab8_system_diagram.png" /></p>
<p>|Kernel|Type|Comment|
|  —  |  —  |  —  |
|MM2S|HLS|Memory Map to Stream HLS kernel to feed input data from DDR to AI Engine interpolator kernel via the PL DMA|
|WeightSum|AI Engine|Ramp filter [1 2 3 4 5 6 7 8]|
|Average|AI Engine|Just a division by 36|
|Polar_clip|HLS|The polar_clip has a single input stream of complex 16-bit samples, and a single output stream whose underlying samples are also complex 16-bit elements. This equates to 32-bit interfaces on the PL side.|
|Classify|AI Engine|Classify the input samples|
|S2MM|HLS|Stream to Memory Map HLS kernel to feed output result data from AI Engine classifier kernel to DDR via the PL DMA|</p>
<div class="section" id="section-1-compile-pl-kernels-and-ai-engine-graph">
<h2>Section 1: Compile PL Kernels and AI Engine Graph<a class="headerlink" href="#section-1-compile-pl-kernels-and-ai-engine-graph" title="Permalink to this headline">¶</a></h2>
<p>The first step is to take any v++ kernels (HLS C) and your AI Engine kernels and graph and compile them into their respective <code class="docutils literal notranslate"><span class="pre">.xo</span></code> and <code class="docutils literal notranslate"><span class="pre">.o</span></code> files. You can compile the kernels and graph in parallel because they do not rely on each other at this step.</p>
<p>This tutorial design has three AI Engine kernels (<code class="docutils literal notranslate"><span class="pre">weightsum</span></code>, <code class="docutils literal notranslate"><span class="pre">average</span></code>, and <code class="docutils literal notranslate"><span class="pre">classifier</span></code>), one HLS PL kernel (<code class="docutils literal notranslate"><span class="pre">polar_clip</span></code>) and two HLS PL kernels (<code class="docutils literal notranslate"><span class="pre">s2mm</span></code> and <code class="docutils literal notranslate"><span class="pre">mm2s</span></code>):</p>
<div class="section" id="compiling-hls-kernels-using-v">
<h3>Compiling HLS Kernels Using v++<a class="headerlink" href="#compiling-hls-kernels-using-v" title="Permalink to this headline">¶</a></h3>
<p>To compile the <code class="docutils literal notranslate"><span class="pre">mm2s</span></code>, <code class="docutils literal notranslate"><span class="pre">s2mm</span></code>, and <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> PL HLS kernels, use the <code class="docutils literal notranslate"><span class="pre">v++</span></code> compiler command - which takes in an HLS kernel source and produces an <code class="docutils literal notranslate"><span class="pre">.xo</span></code> file.</p>
<p>To compile the kernels, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make kernels
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -c --platform <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm --save-temps -g -k s2mm s2mm.cpp -o s2mm.xo
v++ -c --platform <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm --save-temps -g -k mm2s mm2s.cpp -o mm2s.xo
v++ -c --platform <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm --save-temps -g -k polar_clip polar_clip.cpp -o polar_clip.xo
</pre></div>
</div>
<p>Looking at the <code class="docutils literal notranslate"><span class="pre">v++</span></code> command line, you will see several options. The following table describes each option:</p>
<p>|Switch/flag|Description|
|  —  |  —  |
|<code class="docutils literal notranslate"><span class="pre">-c</span></code>|Tells v++ to just compile the kernel|
|<code class="docutils literal notranslate"><span class="pre">--platform/-f</span></code>|Specifies the path to an extensible platform|
|<code class="docutils literal notranslate"><span class="pre">-g</span></code>|Required for the hw_emu target to capture waveform data|
|<code class="docutils literal notranslate"><span class="pre">-k</span></code>|The kernel name. This has to match the function name in the corresponding file defining the kernel. (Eg: For kernel <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> needs to make the function name in <code class="docutils literal notranslate"><span class="pre">mm2s.cpp</span></code>|
|<code class="docutils literal notranslate"><span class="pre">-o</span></code>|The output file must always have the suffix of <code class="docutils literal notranslate"><span class="pre">.xo</span></code>|
|<code class="docutils literal notranslate"><span class="pre">--save-temps/-s</span></code>|Saves the generated output process in the <code class="docutils literal notranslate"><span class="pre">_x</span></code> directory|</p>
</div>
<div class="section" id="compiling-an-ai-engine-adf-graph-for-v-flow">
<h3>Compiling an AI Engine ADF Graph for V++ Flow<a class="headerlink" href="#compiling-an-ai-engine-adf-graph-for-v-flow" title="Permalink to this headline">¶</a></h3>
<p>An ADF Graph can be connected to an extensible Vitis platform. That is, the graph I/Os can be connected either to platform ports or to ports on Vitis kernels through the <code class="docutils literal notranslate"><span class="pre">v++</span></code> connectivity directives.</p>
<ul class="simple">
<li><p>An AI Engine ADF C++ graph contains AI Engine kernels only.</p></li>
<li><p>All interconnections between AI Engine kernels are defined in the C++ graph (<code class="docutils literal notranslate"><span class="pre">graph.h</span></code>).</p></li>
<li><p>All interconnections to external I/Os are fully specified in the C++ simulation testbench (<code class="docutils literal notranslate"><span class="pre">graph.cpp</span></code>) that instantiates the C++ ADF graph object (this is strictly only used in <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code> which is another tutorial). All platform connections from the graph to the “PLIO” map onto ports on the AI Engine subsystem graph that are connected via v++ connectivity directives.</p></li>
<li><p>No dangling ports or implicit “connections” are allowed by <code class="docutils literal notranslate"><span class="pre">v++</span></code>.</p></li>
<li><p>Stream connections are specified through the <code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">--sc</span></code> option, including employment of PL-based data movers, either in the platform or defined outside the ADF graph as Vitis PL kernels.</p></li>
</ul>
<p>To compile the graph type to be used in either HW or HW_EMU, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make aie
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aiecompiler --target<span class="o">=</span>hw -include<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$XILINX_VITIS</span><span class="s2">/aietools/include&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./aie&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./data&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./aie/kernels&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./&quot;</span> --pl-freq<span class="o">=</span><span class="m">100</span> -workdir<span class="o">=</span>./Work  aie/graph.cpp
</pre></div>
</div>
<p>| Flag | Description |
| —- | ———– |
| –target | Target how the compiler will build the graph. Default is <code class="docutils literal notranslate"><span class="pre">hw</span></code> |
| –include | All the include files needed to build the graph |
| –pl-freq | Sets the frequency (in MHz) to all PL kernels in the graph |
| –workdir | The location of where the Work directory will be created |</p>
<p>The generated output from <code class="docutils literal notranslate"><span class="pre">aiecompiler</span></code> is the <code class="docutils literal notranslate"><span class="pre">Work</span></code> directory, and the <code class="docutils literal notranslate"><span class="pre">libadf.a</span></code> file. This file contains the compiled AI Engine configuration, graph, and Kernel <code class="docutils literal notranslate"><span class="pre">.elf</span></code> files.</p>
</div>
</div>
<div class="section" id="section-2-use-v-to-link-ai-engine-hls-kernels-with-the-platform">
<h2>Section 2: Use V++ to Link AI Engine, HLS Kernels with the Platform<a class="headerlink" href="#section-2-use-v-to-link-ai-engine-hls-kernels-with-the-platform" title="Permalink to this headline">¶</a></h2>
<p>After the AI Engine kernels, graph, PL kernel, and HLS kernels have been compiled, you can use <code class="docutils literal notranslate"><span class="pre">v++</span></code> to link them with the platform to generate an <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>.</p>
<p><img alt="Section 2" src="../../../_images/tutorial_step_2.png" /></p>
<p><code class="docutils literal notranslate"><span class="pre">v++</span></code> lets you integrate your AI Engine, HLS, and RTL kernels into an existing extensible platform. This step is where the platform chosen is provided by the hardware designer (or you can opt to use one of the many extensible base platforms provide by Xilinx) and <code class="docutils literal notranslate"><span class="pre">v++</span></code> builds the hardware design for you in addition to integrating the AI Engine and PL kernels in the design.</p>
<p>You have a number of kernels at your disposal, but you need to tell the linker how you want to connect them together (from the AI Engine array to PL and vice versa). These connections are described in a configuration file: <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code> in this tutorial.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[connectivity]</span>
<span class="na">nk</span><span class="o">=</span><span class="s">mm2s:1:mm2s</span>
<span class="na">nk</span><span class="o">=</span><span class="s">s2mm:1:s2mm</span>
<span class="na">stream_connect</span><span class="o">=</span><span class="s">mm2s.s:ai_engine_0.DataIn1</span>
<span class="na">stream_connect</span><span class="o">=</span><span class="s">ai_engine_0.DataOut1:s2mm.s</span>
</pre></div>
</div>
<p>| Option/Flag | Description |
| — | — |
| <code class="docutils literal notranslate"><span class="pre">nk</span></code> | This specifies the kernel and how many are there be instantiated. As example, the <code class="docutils literal notranslate"><span class="pre">nk=mm2s:1:mm2s</span></code> means that the kernel <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> will instantiate one kernel with the name of <code class="docutils literal notranslate"><span class="pre">mm2s</span></code>.|
| <code class="docutils literal notranslate"><span class="pre">stream_connect/sc</span></code> | This specifies the streaming connections to be made between PL/AIE or PL/PL. In this case, it should always be an output of a kernel to the input of a kernel.|</p>
<p><strong>NOTE:</strong> The <code class="docutils literal notranslate"><span class="pre">v++</span></code> command-line can get unruly, and using the <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code> file can help contain it.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">ai_engine_0</span></code> the names are provided in the <code class="docutils literal notranslate"><span class="pre">graph.cpp</span></code> when instantiating a <code class="docutils literal notranslate"><span class="pre">PLIO</span></code> object. For this design, as an example, this line <code class="docutils literal notranslate"><span class="pre">PLIO</span> <span class="pre">*in0</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">PLIO(&quot;DataIn1&quot;,</span> <span class="pre">adf::plio_32_bits,&quot;data/input.txt&quot;);</span></code> has the name <strong>DataIn1</strong> which is the interface name.</p>
<p>Notice that the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> kernel is not specified in the <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code> file. This is because the generated graph (<code class="docutils literal notranslate"><span class="pre">libadf.a</span></code>) contains the kernel information and knows how to connect it up to the AI Engine.</p>
<p>You can see the <code class="docutils literal notranslate"><span class="pre">v++</span></code> switches in more detail in the <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1393-vitis-application-acceleration.pdf">Vitis Unified Software Platform Documentation</a>.</p>
<p>To build the design you can run the follow command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make xclbin
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -l --platform <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm s2mm.xo mm2s.xo polar_clip.xo libadf.a -t hw_emu --save-temps -g --config system.cfg -o tutorial.xclbin 
</pre></div>
</div>
<p>| Flag/Switch | Description |
| — | — |
| <code class="docutils literal notranslate"><span class="pre">--link</span></code>/<code class="docutils literal notranslate"><span class="pre">-l</span></code> | Tells v++ that it will be linking a design, so only the <code class="docutils literal notranslate"><span class="pre">*.xo</span></code> and <code class="docutils literal notranslate"><span class="pre">libadf.a</span></code> files are valid inputs |
| <code class="docutils literal notranslate"><span class="pre">--target</span></code>/<code class="docutils literal notranslate"><span class="pre">-t</span> </code>| Tells v++ how far of a build it should go, hardware (which will build down to a PDI) or hardware emulation (which will build the emulation models) |
| <code class="docutils literal notranslate"><span class="pre">--platform</span></code> |  Same from the previous two steps |
| <code class="docutils literal notranslate"><span class="pre">--config</span></code> | This allows you to simplify the v++ command-line if it gets too unruly and have items in an <code class="docutils literal notranslate"><span class="pre">.ini</span></code> style file. |</p>
<p>Now you have a generated <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code> that will be used to execute your design on the platform.</p>
</div>
<div class="section" id="section-3-compile-the-a72-host-application">
<h2>Section 3: Compile the A72 Host Application<a class="headerlink" href="#section-3-compile-the-a72-host-application" title="Permalink to this headline">¶</a></h2>
<p>After all the new AI Engine outputs are created, you can compile your host application by following the typical cross-compilation flow for the Cortex-A72. As you might notice, the host code is using <a class="reference external" href="http://www.github.com/Xilinx/XRT">XRT</a> (Xilinx Run Time) as an API to talk to the AI Engine and PL kernels. Notice that in the linker that it is using the the libraries: <code class="docutils literal notranslate"><span class="pre">-ladf_api_xrt</span> <span class="pre">-lxrt_coreutil</span></code>.</p>
<ol>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">sw/main.cpp</span></code> and familiarize yourself with the contents. Pay close attention to API calls and the comments provided.</p>
<p>Note that <a class="reference external" href="https://xilinx.github.io/XRT/2020.2/html/index.html">XRT</a> is used in the host application. This API layer is used to communicate with the programmable logic, specifically the PLIO kernels for reading and writing data. To understand how to use this API in an AI Engine application refer to the “Programming the PS Host Application”.</p>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>, and familiarize yourself with the contents. Take note of the <code class="docutils literal notranslate"><span class="pre">GCC_FLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">GCC_INCLUDES</span></code>.</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GCC_FLAGS</span></code>: Self-explanatory that you will be compiling this code with C++ 14. More explanation will be provided in the packaging step.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GCC_INCLUDES</span></code>: Has the list of all the necessary include files from the SYSROOT as well as the AI Engine tools.</p></li>
</ol>
</li>
<li><p>Close the Makefile, and run the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make host
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./sw 
aarch64-linux-gnu-g++ -Wall -c -std<span class="o">=</span>c++14 -Wno-int-to-pointer-cast --sysroot<span class="o">=</span><span class="nv">$SYSROOT</span> -I<span class="nv">$SYSROOT</span>/usr/include/xrt -I<span class="nv">$SYSROOT</span>/usr/include -I./ -I../aie -I<span class="nv">$XILINX_VITIS</span>/aietools/include -I<span class="nv">$XILINX_VITIS</span>/include -o aie_control_xrt.o ../Work/ps/c_rts/aie_control_xrt.cpp
aarch64-linux-gnu-g++ -Wall -c -std<span class="o">=</span>c++14 -Wno-int-to-pointer-cast --sysroot<span class="o">=</span><span class="nv">$SYSROOT</span> -I<span class="nv">$SYSROOT</span>/usr/include/xrt -I<span class="nv">$SYSROOT</span>/usr/include -I./ -I../aie -I<span class="nv">$XILINX_VITIS</span>/aietools/include -I<span class="nv">$XILINX_VITIS</span>/include -o main.o main.cpp
aarch64-linux-gnu-g++ main.o aie_control_xrt.o -ladf_api_xrt -lxrt_coreutil -L<span class="nv">$SYSROOT</span>/usr/lib --sysroot<span class="o">=</span><span class="nv">$SYSROOT</span> -L<span class="nv">$XILINX_VITIS</span>/aietools/lib/aarch64.o -o host.exe 
<span class="nb">cd</span> ..
</pre></div>
</div>
</li>
</ol>
<p>The follow table describes some of the GCC options being used:</p>
<p>| Flag | Description |
| —- | ———– |
| <code class="docutils literal notranslate"><span class="pre">-Wall</span></code> | Print out all warnings            |
| <code class="docutils literal notranslate"><span class="pre">-Wno-int-to-pointer-cast</span></code> | Warn about an integer to pointer cast |
| <code class="docutils literal notranslate"><span class="pre">--sysroot</span></code> | Tells the compiler where to find the headers/libs for cross-compile |
| <code class="docutils literal notranslate"><span class="pre">-std=c++14</span></code> | This is required for Linux applications using XRT |</p>
</div>
<div class="section" id="section-4-package-the-design">
<h2>Section 4: Package the Design<a class="headerlink" href="#section-4-package-the-design" title="Permalink to this headline">¶</a></h2>
<p>With all the AI Engine outputs and the new platform created, you can now generate the Programmable Device Image (PDI) and a package to be used on an SD card. The PDI contains all executables, bitstreams, and configurations of every element of the device, and the packaged SD card directory contains everything to boot Linux and have your generated application and <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>.</p>
<p>To package the design, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make package
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./sw
v++ --package -t hw_emu <span class="se">\</span>
	-f <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm <span class="se">\</span>
	--package.rootfs<span class="o">=</span><span class="nv">$PLATFORM_REPO_PATHS</span>/sw/versal/xilinx-versal-common-v2020.2/rootfs.ext4 <span class="se">\</span>
	--package.image_format<span class="o">=</span>ext4 <span class="se">\</span>
	--package.boot_mode<span class="o">=</span>sd <span class="se">\</span>
	--package.kernel_image<span class="o">=</span><span class="nv">$PLATFORM_REPO_PATHS</span>/sw/versal/xilinx-versal-common-v2020.2/Image <span class="se">\</span>
	--package.defer_aie_run <span class="se">\</span>
	--package.sd_file host.exe ../tutorial.xclbin ../libadf.a
<span class="nb">cd</span> ..
</pre></div>
</div>
<p><strong>NOTE:</strong> By default the <code class="docutils literal notranslate"><span class="pre">--package</span></code> flow will create a <code class="docutils literal notranslate"><span class="pre">a.xclbin</span></code> automatically if the <code class="docutils literal notranslate"><span class="pre">-o</span></code> switch is not set.</p>
<p>The following table describes the packager options:</p>
<p>| Switch/flag | Description |
| — | — |
| <code class="docutils literal notranslate"><span class="pre">rootfs</span></code> | Points to the formatted image of the platform |
| <code class="docutils literal notranslate"><span class="pre">image_format</span></code> | Tells packager what the image format is |
| <code class="docutils literal notranslate"><span class="pre">boot_mode</span></code> | Signifies how the design is going to be run |
| <code class="docutils literal notranslate"><span class="pre">kernel_image</span></code> | Points to the Image file created by Petalinux |
| <code class="docutils literal notranslate"><span class="pre">defer_aie_run</span></code> | Tells packager at boot to not start the AI Engine and let the host application control it |
| <code class="docutils literal notranslate"><span class="pre">sd_file</span></code> | Tell the packager what file is to be packaged in the <code class="docutils literal notranslate"><span class="pre">sd_card</span></code> directory. You’ll have to specify this multiple times for all the files you want packaged |</p>
</div>
<div class="section" id="section-5-run-hardware-emulation">
<h2>Section 5: Run Hardware Emulation<a class="headerlink" href="#section-5-run-hardware-emulation" title="Permalink to this headline">¶</a></h2>
<p>After packaging, everything is set to run emulation or hardware.</p>
<ol class="simple">
<li><p>To run emulation use the following command:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make run_emu
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./sw
./launch_hw_emu.sh
<span class="nb">cd</span> ..
</pre></div>
</div>
<p>When launched, use the Linux prompt presented to run the design.</p>
<ol>
<li><p>Execute the following command when the emulated Linux prompt displays:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /mnt/sd-mmcblk0p1
<span class="nb">export</span> <span class="nv">XILINX_XRT</span><span class="o">=</span>/usr
dmesg -n <span class="m">4</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Hide DRM messages...&quot;</span>
</pre></div>
</div>
</li>
</ol>
<p>This will set up the design to run emulation. Run the design using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./host.exe a.xclbin
</pre></div>
</div>
<p>You should see an output displaying <strong>TEST PASSED</strong>. When this is shown, run the keyboard command: <code class="docutils literal notranslate"><span class="pre">Ctrl+A</span> <span class="pre">x</span></code> to end the QEMU instance.</p>
</div>
<div class="section" id="section-6-build-and-run-on-hardware">
<h2>Section 6: Build and Run on Hardware<a class="headerlink" href="#section-6-build-and-run-on-hardware" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>To build for hardware run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make xclbin <span class="nv">TARGET</span><span class="o">=</span>hw
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -l --platform <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm s2mm.xo mm2s.xo polar_clip.xo libadf.a -t hw --save-temps -g --config system.cfg -o tutorial.xclbin 
</pre></div>
</div>
</li>
<li><p>Then re-run the packaging step with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make package <span class="nv">TARGET</span><span class="o">=</span>hw
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./sw
v++ --package -t hw <span class="se">\</span>
	-f <span class="nv">$PLATFORM_REPO_PATHS</span>/xilinx_vck190_es1_base_202020_1/xilinx_vck190_es1_base_202020_1.xpfm <span class="se">\</span>
	--package.rootfs<span class="o">=</span><span class="nv">$PLATFORM_REPO_PATHS</span>/sw/versal/xilinx-versal-common-v2020.2/rootfs.ext4 <span class="se">\</span>
	--package.image_format<span class="o">=</span>ext4 <span class="se">\</span>
	--package.boot_mode<span class="o">=</span>sd <span class="se">\</span>
	--package.kernel_image<span class="o">=</span><span class="nv">$PLATFORM_REPO_PATHS</span>/sw/versal/xilinx-versal-common-v2020.2/Image <span class="se">\</span>
	--package.defer_aie_run <span class="se">\</span>
	--package.sd_file host.exe ../tutorial.xclbin ../libadf.a
<span class="nb">cd</span> ..
</pre></div>
</div>
</li>
</ol>
<p>When you run on hardware, ensure you have a supported SD card. Format the SD card with the <code class="docutils literal notranslate"><span class="pre">sw/sd_card.img</span></code> file. Then plug the SD card into the board and power it up.</p>
<ol>
<li><p>When a Linux prompt appears, run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dmesg -n <span class="m">4</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Hide DRM messages...&quot;</span>
<span class="nb">cd</span> /mnt/sd-mmcblk0p1
<span class="nb">export</span> <span class="nv">XILINX_XRT</span><span class="o">=</span>/usr
./host.exe a.xclbin
</pre></div>
</div>
</li>
</ol>
<p>You should see <strong>TEST PASSED</strong>. You have successfully run your design on hardware.</p>
<p><strong>IMPORTANT</strong>: To rerun the application you need to power cycle the board.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial you learned the following:</p>
<ul class="simple">
<li><p>How to compile PLIO and PL Kernels using v++ -c</p></li>
<li><p>How to link the <code class="docutils literal notranslate"><span class="pre">libadf.a</span></code>, PLIO and PL kernels to the <code class="docutils literal notranslate"><span class="pre">xilinx_vck190_es1_202020_1</span></code> platform</p></li>
<li><p>How to package your host code, and the generated <code class="docutils literal notranslate"><span class="pre">xclbin</span></code> and <code class="docutils literal notranslate"><span class="pre">libadf.a</span></code> into an SD card directory</p></li>
<li><p>How to execute the design on the board</p></li>
<li><p>How to execute the design for hardware emulation</p></li>
</ul>
<p>To read more about the use of Vitis in the AI Engine flow see: <em>UG1076: Versal ACAP AI Engine Programming Environment Chapter 13: Integrating the Application Using the Vitis Tool Flow</em>.</p>
<p>© Copyright 2020 Xilinx, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
</pre></div>
</div>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<p align="center"><sup>XD002</sup></p></div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020–2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>